preprocess:
  method: auto
  data_fraction: 1

# No new variables needed - all variables already exist in root files


inputs:
  # PFCand constituent points (angular coordinates relative to jet)
  pf_points:
    vars:
      - pfcand_thetarel
      - pfcand_phirel
    length: 100
    
  # PFCand constituent features
  pf_features:
    vars:
      # Particle identification
      - pfcand_isMu
      - pfcand_isEl
      - pfcand_isChargedHad
      - pfcand_isGamma
      - pfcand_isNeutralHad
      
      # Basic kinematics
      #- pfcand_e
      - pfcand_p
        #- pfcand_px
        #- pfcand_py
        #- pfcand_pz
      - pfcand_charge
      - pfcand_type
      - pfcand_theta
      - pfcand_phi
      
      # Relative kinematic variables
      - pfcand_erel
      - pfcand_erel_log
      
      # Impact parameters
      - pfcand_dxy
      - pfcand_dz
      - pfcand_phi0
      - pfcand_C
      - pfcand_ct
      
      # Track covariance matrix elements
      - pfcand_dptdpt
      - pfcand_dxydxy
      - pfcand_dzdz
      - pfcand_dphidphi
      - pfcand_detadeta
      - pfcand_dxydz
      - pfcand_dphidxy
      - pfcand_phidz
      - pfcand_phictgtheta
      - pfcand_dxyctgtheta
      - pfcand_dlambdadz
      - pfcand_cctgtheta
      - pfcand_phic
      - pfcand_dxyc
      - pfcand_cdz
      
      # B-tagging variables
      - pfcand_btagSip2dVal
      - pfcand_btagSip2dSig
      - pfcand_btagSip3dVal
      - pfcand_btagSip3dSig
      - pfcand_btagJetDistVal
      - pfcand_btagJetDistSig
      
      # dE/dx variables - pads
      - pfcand_dEdx_pads_type
      - pfcand_dEdx_pads_value
      - pfcand_dEdx_pads_error
      
      # PID p-values - pads
      - pfcand_PID_pval_pads_ele
      - pfcand_PID_pval_pads_mu
      - pfcand_PID_pval_pads_pi
      - pfcand_PID_pval_pads_kaon
      - pfcand_PID_pval_pads_proton
      
      # dE/dx variables - wires
      - pfcand_dEdx_wires_type
      - pfcand_dEdx_wires_value
      - pfcand_dEdx_wires_error
      
      # PID p-values - wires
      - pfcand_PID_pval_wires_ele
      - pfcand_PID_pval_wires_mu
      - pfcand_PID_pval_wires_pi
      - pfcand_PID_pval_wires_kaon
      - pfcand_PID_pval_wires_proton
    length: 100
    
  # PFCand 4-vectors (px, py, pz, e) for Lorentz group operations
  pf_vectors:
    length: 100
    pad_mode: wrap
    vars:
      - [pfcand_px, null]
      - [pfcand_py, null]
      - [pfcand_pz, null]
      - [pfcand_e, null]
  
  # PFCand mask for valid constituents
  pf_mask:
    length: 100
    pad_mode: constant
    vars:
      - [pfcand_mask, null]

labels:
  type: simple
  value: [recojet_isB, recojet_isC, recojet_isS, recojet_isD, recojet_isU]

observers:
  # Jet-level variables for monitoring/debugging
  - jet_mass
  - jet_p
  - jet_e
  - jet_phi
  - jet_theta
  - jet_pT
  - jet_nnhad
  - jet_ngamma
  - jet_nchad
  - jet_nel
  - jet_nmu
  - jet_nconst
